<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="App update service and other types."><title>zng::update - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-42caa33d.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="zng" data-themes="" data-resource-suffix="" data-rustdoc-version="1.84.0 (9fc6b4312 2025-01-07)" data-channel="1.84.0" data-search-js="search-92e6798f.js" data-settings-js="settings-0f613d39.js" ><script src="../../static.files/storage-59e33391.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo-icon.png"><link rel="stylesheet" href="/doc/zng-material-icons-extensions.css">
</head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../zng/index.html"><img src="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../zng/index.html"><img src="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo.png" alt="logo"></a><h2><a href="../../zng/index.html">zng</a><span class="version">0.13.8</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module update</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#full-api" title="Full API">Full API</a></li></ul><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#traits" title="Traits">Traits</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate zng</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../index.html">zng</a></span><h1>Module <span>update</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/zng/update.rs.html#1-33">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>App update service and other types.</p>
<p>The <a href="struct.UPDATES.html" title="struct zng::update::UPDATES"><code>UPDATES</code></a> service can execute arbitrary futures and setup update handlers. It can also be used to request update,
info rebuild, layout and render for any widget. Note that from inside the widget you should use the <a href="../widget/struct.WIDGET.html" title="struct zng::widget::WIDGET"><code>WIDGET</code></a> service instead,
as it is more efficient.</p>
<p>The example below setups a handler that is called every app update.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>zng::prelude::<span class="kw-2">*</span>;

zng::update::UPDATES
  .on_pre_update(<span class="macro">app_hn!</span>(|args: <span class="kw-2">&amp;</span>zng::update::UpdateArgs, <span class="kw">_</span>| {
      <span class="macro">println!</span>(<span class="string">"pre_update #{}"</span>, args.count);
  }))
  .perm();</code></pre></div>
<p>Updates are coalesced, multiple requests for the same widget will cause it to only update once, and multiple widgets
can update on the same pass. See the <a href="../app/index.html#main-loop" title="mod zng::app">Main Loop</a> docs in the <code>app</code> module for more details.</p>
<h2 id="full-api"><a class="doc-anchor" href="#full-api">ยง</a>Full API</h2>
<p>See <a href="../../zng_app/update/index.html" title="mod zng_app::update"><code>zng_app::update</code></a> for the full update API.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">ยง</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ContextUpdates.html" title="struct zng::update::ContextUpdates">Context<wbr>Updates</a></div><div class="desc docblock-short">Updates that must be reacted by an app owner.</div></li><li><div class="item-name"><a class="struct" href="struct.EventUpdate.html" title="struct zng::update::EventUpdate">Event<wbr>Update</a></div><div class="desc docblock-short">Represents a single event update.</div></li><li><div class="item-name"><a class="struct" href="struct.InfoUpdates.html" title="struct zng::update::InfoUpdates">Info<wbr>Updates</a></div><div class="desc docblock-short">Widget info updates of the current cycle.</div></li><li><div class="item-name"><a class="struct" href="struct.LayoutUpdates.html" title="struct zng::update::LayoutUpdates">Layout<wbr>Updates</a></div><div class="desc docblock-short">Widget layout updates of the current cycle.</div></li><li><div class="item-name"><a class="struct" href="struct.OnUpdateHandle.html" title="struct zng::update::OnUpdateHandle">OnUpdate<wbr>Handle</a></div><div class="desc docblock-short">Represents an <a href="struct.UPDATES.html#method.on_pre_update" title="method zng::update::UPDATES::on_pre_update"><code>on_pre_update</code></a> or <a href="struct.UPDATES.html#method.on_update" title="method zng::update::UPDATES::on_update"><code>on_update</code></a> handler.</div></li><li><div class="item-name"><a class="struct" href="struct.RenderUpdates.html" title="struct zng::update::RenderUpdates">Render<wbr>Updates</a></div><div class="desc docblock-short">Widget render updates of the current cycle.</div></li><li><div class="item-name"><a class="struct" href="struct.UPDATES.html" title="struct zng::update::UPDATES">UPDATES</a></div><div class="desc docblock-short">Update schedule service.</div></li><li><div class="item-name"><a class="struct" href="struct.UpdateArgs.html" title="struct zng::update::UpdateArgs">Update<wbr>Args</a></div><div class="desc docblock-short">Arguments for an <a href="struct.UPDATES.html#method.on_pre_update" title="method zng::update::UPDATES::on_pre_update"><code>on_pre_update</code></a>, <a href="struct.UPDATES.html#method.on_update" title="method zng::update::UPDATES::on_update"><code>on_update</code></a> or <a href="struct.UPDATES.html#method.run" title="method zng::update::UPDATES::run"><code>run</code></a> handler.</div></li><li><div class="item-name"><a class="struct" href="struct.UpdateDeliveryList.html" title="struct zng::update::UpdateDeliveryList">Update<wbr>Delivery<wbr>List</a></div><div class="desc docblock-short">Represents all the widgets and windows marked to receive an update.</div></li><li><div class="item-name"><a class="struct" href="struct.WeakOnUpdateHandle.html" title="struct zng::update::WeakOnUpdateHandle">Weak<wbr>OnUpdate<wbr>Handle</a></div><div class="desc docblock-short">Weak <a href="struct.OnUpdateHandle.html" title="struct zng::update::OnUpdateHandle"><code>OnUpdateHandle</code></a>.</div></li><li><div class="item-name"><a class="struct" href="struct.WidgetUpdates.html" title="struct zng::update::WidgetUpdates">Widget<wbr>Updates</a></div><div class="desc docblock-short">Widget updates of the current cycle.</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">ยง</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.UpdateOp.html" title="enum zng::update::UpdateOp">Update<wbr>Op</a></div><div class="desc docblock-short">Identify node and app-extension operations that can be requested.</div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">ยง</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.UpdateSubscribers.html" title="trait zng::update::UpdateSubscribers">Update<wbr>Subscribers</a></div><div class="desc docblock-short">Represents a set of widgets that subscribe to an event source.</div></li><li><div class="item-name"><a class="trait" href="trait.UpdatesTraceUiNodeExt.html" title="trait zng::update::UpdatesTraceUiNodeExt">Updates<wbr>Trace<wbr>UiNode<wbr>Ext</a></div><div class="desc docblock-short">Extension methods for infinite loop diagnostics.</div></li></ul></section></div></main></body></html>