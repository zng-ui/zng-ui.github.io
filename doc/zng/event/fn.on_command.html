<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Helper for declaring command event properties."><title>on_command in zng::event - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-081576b923113409.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="zng" data-themes="" data-resource-suffix="" data-rustdoc-version="1.79.0 (129f3b996 2024-06-10)" data-channel="1.79.0" data-search-js="search-bf21c90c8c1d92b1.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-e32f0c247825364d.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-20a3ad099b048cf2.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-09095024cf37855e.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo-icon.png"><link rel="stylesheet" href="/doc/zng-material-icons-extensions.css">
</head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../zng/index.html"><img src="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../zng/index.html"><img src="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo.png" alt="logo"></a><h2><a href="../../zng/index.html">zng</a><span class="version">0.9.1</span></h2></div><div class="sidebar-elems"><h2><a href="index.html">In zng::event</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../../zng/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Type ‘S’ or ‘/’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings">Settings</a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../index.html">zng</a>::<wbr><a href="index.html">event</a>::<wbr><a class="fn" href="#">on_command</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><a class="src" href="../../src/zng_wgt/node.rs.html#819-825">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub fn on_command&lt;U, CB, E, EB, H&gt;(
    child: U,
    command_builder: CB,
    enabled_builder: EB,
    handler: H
) -&gt; impl <a class="trait" href="../widget/node/trait.UiNode.html" title="trait zng::widget::node::UiNode">UiNode</a><div class="where">where
    U: <a class="trait" href="../widget/node/trait.UiNode.html" title="trait zng::widget::node::UiNode">UiNode</a>,
    CB: <a class="trait" href="https://doc.rust-lang.org/1.79.0/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>() -&gt; <a class="struct" href="struct.Command.html" title="struct zng::event::Command">Command</a> + <a class="trait" href="https://doc.rust-lang.org/1.79.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,
    E: <a class="trait" href="../var/trait.Var.html" title="trait zng::var::Var">Var</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.79.0/std/primitive.bool.html">bool</a>&gt;,
    EB: <a class="trait" href="https://doc.rust-lang.org/1.79.0/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>() -&gt; E + <a class="trait" href="https://doc.rust-lang.org/1.79.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,
    H: <a class="trait" href="../handler/trait.WidgetHandler.html" title="trait zng::handler::WidgetHandler">WidgetHandler</a>&lt;<a class="struct" href="struct.CommandArgs.html" title="struct zng::event::CommandArgs">CommandArgs</a>&gt;,</div></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Helper for declaring command event properties.</p>
<p>This function is used by the <a href="macro.command_property.html" title="macro zng::event::command_property"><code>command_property!</code></a> macro.</p>
<h2 id="command"><a class="doc-anchor" href="#command">§</a>Command</h2>
<p>The <code>command_builder</code> closure is called on init to generate the command, it is a closure to allow
creation of widget scoped commands. The event <code>handler</code> will receive events for the command
and scope that target the widget where it is set.</p>
<p>If the command is scoped on the root widget and <code>on_command</code> is set on the same root widget a second handle
is taken for the window scope too, so callers can target the <em>window</em> using the window ID or the root widget ID.</p>
<h2 id="enabled"><a class="doc-anchor" href="#enabled">§</a>Enabled</h2>
<p>The <code>enabled_builder</code> closure is called on init to generate a boolean variable that defines
if the command handle is enabled. Command event handlers track both their existence and
the enabled flag, see <a href="struct.Command.html#method.subscribe" title="method zng::event::Command::subscribe"><code>Command::subscribe</code></a> for details.</p>
<p>Note that the command handler can be enabled even when the widget is disabled, the widget
will receive the event while disabled in this case, you can use this to show feedback explaining
why the command cannot run.</p>
<h2 id="route"><a class="doc-anchor" href="#route">§</a>Route</h2>
<p>The event <code>handler</code> is called after the <a href="fn.on_pre_command.html" title="fn zng::event::on_pre_command"><code>on_pre_command</code></a> equivalent at the same context level. If the command
event targets more then one widget and one widget contains the other, the <code>handler</code> is called on the inner widget first.</p>
<h2 id="async"><a class="doc-anchor" href="#async">§</a>Async</h2>
<p>Async event handlers are called like normal, but code after the first <code>.await</code> only runs in subsequent updates. This means
that <a href="trait.AnyEventArgs.html#tymethod.propagation" title="method zng::event::AnyEventArgs::propagation"><code>propagation</code></a> must be stopped before the first <code>.await</code>, otherwise you are only signaling
other async tasks handling the same event, if they are monitoring the propagation handle.</p>
</div></details></section></div></main></body></html>