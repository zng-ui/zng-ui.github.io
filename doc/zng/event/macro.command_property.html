<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content=" Declare one or more command event properties."><title>command_property in zng::event - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="zng" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.0 (4d91de4e4 2025-02-17)" data-channel="1.85.0" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../../static.files/storage-59e33391.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo-icon.png"><link rel="stylesheet" href="/doc/zng-material-icons-extensions.css">
</head><body class="rustdoc macro"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../zng/index.html"><img src="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../zng/index.html"><img src="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo.png" alt="logo"></a><h2><a href="../../zng/index.html">zng</a><span class="version">0.14.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">command_<wbr>property</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#examples" title="Examples">Examples</a></li><li><a href="#command" title="Command">Command</a></li><li><a href="#enabled" title="Enabled">Enabled</a></li><li><a href="#async" title="Async">Async</a></li><li><a href="#implement-for" title="Implement For">Implement For</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In zng::<wbr>event</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../index.html">zng</a>::<wbr><a href="index.html">event</a></span><h1>Macro <span class="macro">command_property</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/zng_wgt/node.rs.html#878">Source</a> </span></div><pre class="rust item-decl"><code>macro_rules! command_property {
    ($(
        $(#[$on_cmd_attrs:meta])*
        $vis:vis fn $command:ident {
            cmd: $cmd_init:expr
            $(, enabled: $enabled_var:expr)?
            $(, widget_impl: $Wgt:ty)?
            $(,)?
        }
    )+) =&gt; { ... };
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p><span data-del-macro-root></span> Declare one or more command event properties.</p>
<p>Each declaration expands to two properties <code>on_$command</code> and <code>on_pre_$command</code>.
The preview properties call <a href="fn.on_pre_command.html" title="fn zng::event::on_pre_command"><code>on_pre_command</code></a>, the main event properties call <a href="fn.on_command.html" title="fn zng::event::on_command"><code>on_command</code></a>.</p>
<h2 id="examples"><a class="doc-anchor" href="#examples">§</a>Examples</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="macro">command_property!</span> {
    <span class="doccomment">/// Paste command property docs.
    </span><span class="kw">pub fn </span>paste {
        cmd: PASTE_CMD.scoped(WIDGET.id()),
        <span class="comment">// enabled: LocalVar(true), // default enabled
    </span>}
}</code></pre></div>
<h2 id="command"><a class="doc-anchor" href="#command">§</a>Command</h2>
<p>The <code>cmd:</code> expression evaluates on init to generate the command, this allows for the
creation of widget scoped commands. The new command property event handler will receive events
for the command and scope that target the widget where the property is set.</p>
<p>If the command is scoped on the root widget and the command property is set on the same root widget a second handle
is taken for the window scope too, so callers can target the <em>window</em> using the window ID or the root widget ID.</p>
<h2 id="enabled"><a class="doc-anchor" href="#enabled">§</a>Enabled</h2>
<p>The <code>enabled:</code> expression evaluates on init to generate a boolean variable that defines
if the command handle is enabled. Command event handlers track both their existence and
the enabled flag, see <a href="struct.Command.html#method.subscribe" title="method zng::event::Command::subscribe"><code>Command::subscribe</code></a> for details.</p>
<p>If not provided the command is always enabled.</p>
<h2 id="async"><a class="doc-anchor" href="#async">§</a>Async</h2>
<p>Async event handlers are supported by properties generated by this macro, but only the code before the first <code>.await</code> executes
in the event track, subsequent code runs in widget updates.</p>
<h2 id="implement-for"><a class="doc-anchor" href="#implement-for">§</a>Implement For</h2>
<p>You can implement the new properties for a widget or mix-in using the <code>widget_impl:</code> directive:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="doccomment">/// Clipboard handler.
</span><span class="attr">#[widget_mixin]
</span><span class="kw">pub struct </span>ClipboardMix&lt;P&gt;(P);

<span class="macro">command_property!</span> {
    <span class="doccomment">/// Paste command property docs.
    </span><span class="kw">pub fn </span>paste {
        cmd: PASTE_CMD.scoped(WIDGET.id()),
        widget_impl: ClipboardMix&lt;P&gt;,
    }
}</code></pre></div>
</div></details></section></div></main></body></html>