<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Expands a function to a widget property."><title>property in zng::widget - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="zng" data-themes="" data-resource-suffix="" data-rustdoc-version="1.92.0 (ded5c06cf 2025-12-08)" data-channel="1.92.0" data-search-js="search-d69d8955.js" data-stringdex-js="stringdex-c3e638e9.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-ce535bd0.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="icon" href="https://zng-ui.github.io/res/zng-logo-icon.png"><link rel="stylesheet" href="/doc/zng-material-icons-extensions.css">
</head><body class="rustdoc attr"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">property</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../zng/index.html"><img src="https://zng-ui.github.io/res/zng-logo.png" alt="logo"></a><h2><a href="../../zng/index.html">zng</a><span class="version">0.20.2</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">property</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#attribute-args" title="Attribute Args">Attribute Args</a><ul><li><a href="#nest-group" title="Nest Group">Nest Group</a></li><li><a href="#default" title="Default">Default</a></li><li><a href="#impl-for" title="Impl For">Impl For</a></li></ul></li><li><a href="#function-args" title="Function Args">Function Args</a><ul><li><a href="#child" title="Child">Child</a></li><li><a href="#inputs" title="Inputs">Inputs</a></li><li><a href="#input-types" title="Input Types">Input Types</a></li></ul></li><li><a href="#getter-properties" title="Getter Properties">Getter Properties</a></li><li><a href="#generics" title="Generics">Generics</a></li><li><a href="#output" title="Output">Output</a></li><li><a href="#build-action-properties" title="Build Action Properties">Build Action Properties</a><ul><li><a href="#capture-only" title="Capture Only">Capture Only</a></li></ul></li><li><a href="#more-details" title="More Details">More Details</a></li><li><a href="#full-documentation" title="Full Documentation">Full Documentation</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In zng::<wbr>widget</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">zng</a>::<wbr><a href="index.html">widget</a></div><h1>Attribute Macro <span class="attr">property</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/zng_app_proc_macros/lib.rs.html#34">Source</a> </span></div><pre class="rust item-decl"><code>#[property]</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Expands a function to a widget property.</p>
<p>Property functions take one <a href="node/trait.IntoUiNode.html" title="trait zng::widget::node::IntoUiNode"><code>IntoUiNode</code></a> child input and one or more other inputs and produces an <a href="node/struct.UiNode.html" title="struct zng::widget::node::UiNode"><code>UiNode</code></a> that implements
the property feature. Alternatively it takes one <a href="builder/struct.WidgetBuilding.html" title="struct zng::widget::builder::WidgetBuilding"><code>WidgetBuilding</code></a> input plus other inputs and modifies the widget build.</p>
<p>The attribute expansion does not modify the function, it can still be used as a function directly. Some
properties are implemented by calling other property functions to generate a derived effect.</p>
<p>The attribute expansion generates a hidden trait of the same name and visibility, the trait is implemented for widget builders,
the widget macros use this to set the property. Because it has the same name it is imported together with the property
function, in practice this only matters in doc links where you must use the <code>fn@</code> disambiguator.</p>
<h2 id="attribute-args"><a class="doc-anchor" href="#attribute-args">§</a>Attribute Args</h2>
<p>The property attribute has one required argument and three optional.</p>
<h5 id="nest-group"><a class="doc-anchor" href="#nest-group">§</a>Nest Group</h5>
<p>The first argument is the property <a href="builder/struct.NestGroup.html" title="struct zng::widget::builder::NestGroup"><code>NestGroup</code></a>. The group defines the overall nest position
of the property, for example, <code>LAYOUT</code> properties always wrap <code>FILL</code> properties. This is important as widgets are open and any combination
of properties may end-up instantiated in the same widget.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>zng::prelude_wgt::<span class="kw-2">*</span>;

<span class="attr">#[property(LAYOUT)]
</span><span class="kw">pub fn </span>align(child: <span class="kw">impl </span>IntoUiNode, align: <span class="kw">impl </span>IntoVar&lt;Align&gt;) -&gt; UiNode {
    <span class="comment">// ..
</span>}</code></pre></div>
<p>The nest group can be tweaked, by adding or subtracting integers, in the example bellow both properties are in the <code>SIZE</code> group,
but <code>size</code> is always inside <code>max_size</code>.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>zng::prelude_wgt::<span class="kw-2">*</span>;

<span class="attr">#[property(SIZE+<span class="number">1</span>)]
</span><span class="kw">pub fn </span>size(child: <span class="kw">impl </span>IntoUiNode, size: <span class="kw">impl </span>IntoVar&lt;Size&gt;) -&gt; UiNode {
    <span class="comment">// ..
</span>}

<span class="attr">#[property(SIZE)]
</span><span class="kw">pub fn </span>max_size(child: <span class="kw">impl </span>IntoUiNode, size: <span class="kw">impl </span>IntoVar&lt;Size&gt;) -&gt; UiNode {
    <span class="comment">// ..
</span>}</code></pre></div><h5 id="default"><a class="doc-anchor" href="#default">§</a>Default</h5>
<p>The next argument is an optional <code>default(args..)</code>. It defines the value to use when the property must be instantiated and no value was provided.
The defaults should cause the property to behave as if it is not set, as the default value will be used in widgets that only set the
property in <code>when</code> blocks.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>zng::prelude_wgt::<span class="kw-2">*</span>;

<span class="attr">#[property(FILL, default(rgba(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)))]
</span><span class="kw">pub fn </span>background_color(child: <span class="kw">impl </span>IntoUiNode, color: <span class="kw">impl </span>IntoVar&lt;Rgba&gt;) -&gt; UiNode {
    <span class="comment">// ..
</span>}</code></pre></div>
<p>In the example above the <code>background_color</code> defines a transparent color as the default, so if the background color is only set in a <code>when</code>
block if will only be visible when it is active.</p>
<p>For properties with multiple inputs the default args may be defined in a comma separated list of params, <code>default(dft0, ..)</code>.</p>
<h5 id="impl-for"><a class="doc-anchor" href="#impl-for">§</a>Impl For</h5>
<p>The last argument is an optional <code>impl(&lt;widget-type&gt;,...)</code>, it strongly associates the property with one or more widgets.
When a property is implemented on a widget users can set it without needing to import the property.</p>
<p>Note that this makes the property have priority over all others of the same name, only a derived widget can override
with another strongly associated property.</p>
<p>Note that you can also use the <a href="macro.widget_impl.html" title="macro zng::widget::widget_impl"><code>widget_impl!</code></a> in widget declarations to implement existing properties for a widget.</p>
<h2 id="function-args"><a class="doc-anchor" href="#function-args">§</a>Function Args</h2>
<p>The property function requires at least two args, the first is the child node and the other(s) the input values. The
number and type of inputs is validated at compile time, the types are limited and are identified and validated by their
token name, so you cannot use renamed types.</p>
<h5 id="child"><a class="doc-anchor" href="#child">§</a>Child</h5>
<p>The first function arg must be of type <code>impl IntoUiNode</code>, it represents the child node and the property node must
delegate to it so that the UI tree functions correctly. The type must be an <code>impl</code> generic, a full path to <a href="node/trait.IntoUiNode.html" title="trait zng::widget::node::IntoUiNode"><code>IntoUiNode</code></a>
is allowed, but no import renames as the proc-macro attribute can only use tokens to identify the type.</p>
<h6 id="or-building"><a class="doc-anchor" href="#or-building">§</a>Or Building</h6>
<p>Alternatively, the first function arg must be of type <code>&amp;mut WidgetBuilding</code>, in this case the property function runs
during widget build and can do things like insert multiple nodes on the widget or set the widget child node.</p>
<h5 id="inputs"><a class="doc-anchor" href="#inputs">§</a>Inputs</h5>
<p>The second arg and optional other args define the property inputs. When a property is assigned in a widget only these inputs
are defined by the user, the child arg is provided by the widget builder. Property inputs are limited, and must be identifiable
by their token name alone. The types are validated at compile time, they must be declared using <code>impl</code> generics,
a full path to the generic traits is allowed, but no import renames.</p>
<h5 id="input-types"><a class="doc-anchor" href="#input-types">§</a>Input Types</h5>
<p>These are the allowed input types:</p>
<h6 id="impl-intovart"><a class="doc-anchor" href="#impl-intovart">§</a><code>impl IntoVar&lt;T&gt;</code></h6>
<p>The most common type, accepts any value that can be converted <a href="../var/trait.IntoVar.html" title="trait zng::var::IntoVar"><code>IntoVar&lt;T&gt;</code></a>, usually the property defines the <code>T</code>, but it can be generic.
The property node must respond to var updates. The input kind is <a href="builder/enum.InputKind.html#variant.Var" title="variant zng::widget::builder::InputKind::Var"><code>InputKind::Var</code></a>. No auto-default is generated for this type, property
implementation should provide a default value that causes the property to behave as if it was not set.</p>
<p>The input can be read in <code>when</code> expressions and can be assigned in <code>when</code> blocks.</p>
<h6 id="impl-intovaluet"><a class="doc-anchor" href="#impl-intovaluet">§</a><code>impl IntoValue&lt;T&gt;</code></h6>
<p>Accepts any value that can be converted <a href="../var/trait.IntoValue.html" title="trait zng::var::IntoValue"><code>IntoValue&lt;T&gt;</code></a> that does not change, usually the property
defines the <code>T</code>, but it can be generic. The input kind is <a href="builder/enum.InputKind.html#variant.Value" title="variant zng::widget::builder::InputKind::Value"><code>InputKind::Value</code></a>. No auto-default is generated for this type.</p>
<p>The input can be read in <code>when</code> expressions, but cannot be assigned in <code>when</code> blocks.</p>
<h6 id="impl-intouinode"><a class="doc-anchor" href="#impl-intouinode">§</a><code>impl IntoUiNode</code></h6>
<p>This input accepts another <a href="node/struct.UiNode.html" title="struct zng::widget::node::UiNode"><code>UiNode</code></a>, the implementation must handle it like it handles the child node, delegating all methods. The
input kind is <a href="builder/enum.InputKind.html#variant.UiNode" title="variant zng::widget::builder::InputKind::UiNode"><code>InputKind::UiNode</code></a>. The <a href="node/struct.UiNode.html#method.nil" title="associated function zng::widget::node::UiNode::nil"><code>UiNode::nil</code></a> is used as the default value if no other is provided.</p>
<p>The input cannot be read in <code>when</code> expressions, but can be assigned in <code>when</code> blocks.</p>
<p>Note that UI lists like <a href="node/macro.ui_vec.html" title="macro zng::widget::node::ui_vec"><code>ui_vec!</code></a> are also nodes, so panel children properties also receive <code>impl IntoUiNode</code>.</p>
<h6 id="handlera"><a class="doc-anchor" href="#handlera">§</a><code>Handler&lt;A&gt;</code></h6>
<p>This input is the type alias <a href="../handler/type.Handler.html" title="type zng::handler::Handler"><code>Handler&lt;A&gt;</code></a>, generic for the argument type <code>A</code>, usually the property defines the <code>A</code>, but it can be generic.
The input kind is <a href="builder/enum.InputKind.html#variant.Handler" title="variant zng::widget::builder::InputKind::Handler"><code>InputKind::Handler</code></a>. A no-op handler is used for the default if no other is provided.</p>
<p>Event handler properties usually have the <code>on_</code> name prefix. You can use the <a href="../event/macro.event_property.html" title="macro zng::event::event_property"><code>event_property!</code></a> macro to generate standard event properties.</p>
<p>The input cannot be read in <code>when</code> expressions, but can be assigned in <code>when</code> blocks.</p>
<h2 id="getter-properties"><a class="doc-anchor" href="#getter-properties">§</a>Getter Properties</h2>
<p>Most properties with var inputs are <em>setters</em>, that is the inputs affect the widget. Some properties
can be <em>getters</em>, detecting widget state and setting it on the <em>input</em> variable. These properties are usually named with
a prefix that indicates their input is actually for getting state, the prefixes <code>is_</code> and <code>has_</code> mark a property with
a single <code>bool</code> input that reads a widget state, the prefix <code>get_</code> and <code>actual_</code> marks a property that reads a non-boolean state from
the widget.</p>
<p>Getter properties are configured with a default read-write variable, so that they can be used in <code>when</code> expressions directly,
for example, <code>when *#is_pressed</code>, the <code>is_pressed</code> property has a <code>default(var(false))</code>, so it automatically initializes
with a read-write variable that is used in the when condition. The property attribute generates defaults automatically
based on the prefix, the default is <code>var(T::default())</code>, this can be overwritten just by setting the default,
it is not possible to declare a getter property without default.</p>
<p>Note that if a property is used in <code>when</code> condition without being set and without default value the when block is discarded on
widget build. If you are implementing a getter property that is not named using the prefixes listed above you must set <code>default(var(T::default())</code>.</p>
<h2 id="generics"><a class="doc-anchor" href="#generics">§</a>Generics</h2>
<p>Apart from the <code>impl</code> generics of inputs and child, there is some support for named generic types, only one named generic is allowed
for inputs <code>impl IntoVar&lt;T&gt;</code>, <code>impl IntoValue&lt;T&gt;</code> and <code>Handler&lt;A&gt;</code>.</p>
<h2 id="output"><a class="doc-anchor" href="#output">§</a>Output</h2>
<p>The property output type must be <a href="node/struct.UiNode.html" title="struct zng::widget::node::UiNode"><code>UiNode</code></a>. The property node implementation can be anything, as long as it delegates
to the child node, see <a href="node/fn.match_node.html" title="fn zng::widget::node::match_node"><code>match_node</code></a> or <a href="macro@ui_node"><code>ui_node</code></a> about implementing a node.</p>
<p>Some common property patterns have helper functions, for example, to setup a context var you can use the <a href="node/fn.with_context_var.html" title="fn zng::widget::node::with_context_var"><code>with_context_var</code></a> function.</p>
<h2 id="build-action-properties"><a class="doc-anchor" href="#build-action-properties">§</a>Build Action Properties</h2>
<p>Property functions can take a <code>&amp;mut WidgetBuilding</code> first arg, in this case they are <em>build action properties</em>. These properties cannot
be instantiated into a node, they only work if set on an widget. The property function is called during widget build, after property resolution
and widget intrinsic build actions, the function can modify the <a href="builder/struct.WidgetBuilding.html" title="struct zng::widget::builder::WidgetBuilding"><code>WidgetBuilding</code></a>, just like an intrinsic build action.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>zng::prelude_wgt::<span class="kw-2">*</span>;

<span class="attr">#[property(CHILD)]
</span><span class="kw">pub fn </span>child(wgt: <span class="kw-2">&amp;mut </span>WidgetBuilding, child: <span class="kw">impl </span>IntoUiNode) {
    wgt.set_child(child);
}</code></pre></div>
<p>The example above declares a simple property that replaces the widget child.</p>
<h3 id="capture-only"><a class="doc-anchor" href="#capture-only">§</a>Capture Only</h3>
<p>Some widgets intrinsic behavior depend on the value of multiple properties that cannot provide any implementation by themselves. In
this case the property should be declared as a build action property and call <a href="builder/struct.WidgetBuilding.html#method.expect_property_capture" title="method zng::widget::builder::WidgetBuilding::expect_property_capture"><code>expect_property_capture</code></a>.
The widget them must capture the property during build, if it does not an error is logged in build with debug assertions enabled.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>zng::prelude_wgt::<span class="kw-2">*</span>;

<span class="attr">#[property(CHILD, widget_impl(MyPanel))]
</span><span class="kw">pub fn </span>children(wgt: <span class="kw-2">&amp;mut </span>WidgetBuilding, children: <span class="kw">impl </span>IntoUiNode) {
    <span class="kw">let _ </span>= children;
    wgt.expect_property_capture();
}</code></pre></div>
<p>The example above declares a property that expects to be captured, if the property function actually runs it will log an error
in builds with debug assertions enabled.</p>
<h2 id="more-details"><a class="doc-anchor" href="#more-details">§</a>More Details</h2>
<p>See <a href="builder/macro.property_id.html" title="macro zng::widget::builder::property_id"><code>property_id!</code></a> and <a href="builder/macro.property_args.html" title="macro zng::widget::builder::property_args"><code>property_args!</code></a> for more details about what kind of meta-code is generated for properties.</p>
<script>
// hide re-exported docs
let me = document.currentScript;
document.addEventListener("DOMContentLoaded", function() {
    while(me.nextElementSibling !== null) {
        me.nextElementSibling.remove();
    }
});
</script>
<p>Expands a function to a widget property.</p>
<h2 id="full-documentation"><a class="doc-anchor" href="#full-documentation">§</a>Full Documentation</h2>
<p>Read the documentation in the <code>zng::widget::property</code> page.</p>
</div></details></section></div></main></body></html>