<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Helper for declaring command event properties."><title>on_command in zng_wgt::node - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-1a91846b.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="zng_wgt" data-themes="" data-resource-suffix="" data-rustdoc-version="1.88.0 (6b00bc388 2025-06-23)" data-channel="1.88.0" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../../static.files/storage-4e99c027.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-7ef8a74a.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo-icon.png"><script>
// Hides tagged `macro_rules!` macros from crate root.

document.addEventListener('DOMContentLoaded', function () {
    let is_front_pg = false;
    document.querySelectorAll('h1').forEach(function (h) {
        if (h.innerText.trimStart().startsWith("Crate ")) {
            is_front_pg = true;
        }
    });

    if (is_front_pg) {
        // remove tagged macros.
        let removes = document.querySelectorAll('span[data-del-macro-root]');
        for (let remove of removes) {
            let div = remove.parentElement.parentElement;
            if (div.previousElementSibling != null) {
                div.previousElementSibling.remove();
            }
            div.remove();
        }
    }

    // remove empty macros section.
    let title = document.getElementById('macros');
    if (title != null && title.nextElementSibling.querySelector('a') == null) {
        title.nextElementSibling.remove();
        title.remove();

        let side_anchor = document.querySelector('a[href="#macros"]');
        if (side_anchor != null) {
            side_anchor.parentElement.remove();
        }
    }
})
</script>
</head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../zng_wgt/index.html"><img src="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../zng_wgt/index.html"><img src="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo.png" alt="logo"></a><h2><a href="../../zng_wgt/index.html">zng_wgt</a><span class="version">0.8.8</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">on_<wbr>command</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#command" title="Command">Command</a></li><li><a href="#enabled" title="Enabled">Enabled</a></li><li><a href="#route" title="Route">Route</a></li><li><a href="#async" title="Async">Async</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In zng_<wbr>wgt::<wbr>node</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">zng_wgt</a>::<wbr><a href="index.html">node</a></div><h1>Function <span class="fn">on_command</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/zng_wgt/node.rs.html#936-950">Source</a> </span></div><pre class="rust item-decl"><code>pub fn on_command&lt;U, CB, E, EB, H&gt;(
    child: U,
    command_builder: CB,
    enabled_builder: EB,
    handler: H,
) -&gt; impl <a class="trait" href="../../zng_app/widget/node/trait.UiNode.html" title="trait zng_app::widget::node::UiNode">UiNode</a><div class="where">where
    U: <a class="trait" href="../../zng_app/widget/node/trait.UiNode.html" title="trait zng_app::widget::node::UiNode">UiNode</a>,
    CB: <a class="trait" href="https://doc.rust-lang.org/1.88.0/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>() -&gt; <a class="struct" href="../../zng_app/event/command/struct.Command.html" title="struct zng_app::event::command::Command">Command</a> + <a class="trait" href="https://doc.rust-lang.org/1.88.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,
    E: <a class="trait" href="../../zng_var/trait.Var.html" title="trait zng_var::Var">Var</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.88.0/std/primitive.bool.html">bool</a>&gt;,
    EB: <a class="trait" href="https://doc.rust-lang.org/1.88.0/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>() -&gt; E + <a class="trait" href="https://doc.rust-lang.org/1.88.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'static,
    H: <a class="trait" href="../../zng_app/handler/trait.WidgetHandler.html" title="trait zng_app::handler::WidgetHandler">WidgetHandler</a>&lt;<a class="struct" href="../../zng_app/event/command/struct.CommandArgs.html" title="struct zng_app::event::command::CommandArgs">CommandArgs</a>&gt;,</div></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Helper for declaring command event properties.</p>
<p>This function is used by the <a href="../macro.command_property.html" title="macro zng_wgt::command_property"><code>command_property!</code></a> macro.</p>
<h2 id="command"><a class="doc-anchor" href="#command">ยง</a>Command</h2>
<p>The <code>command_builder</code> closure is called on init to generate the command, it is a closure to allow
creation of widget scoped commands. The event <code>handler</code> will receive events for the command
and scope that target the widget where it is set.</p>
<p>If the command is scoped on the root widget and <code>on_command</code> is set on the same root widget a second handle
is taken for the window scope too, so callers can target the <em>window</em> using the window ID or the root widget ID.</p>
<h2 id="enabled"><a class="doc-anchor" href="#enabled">ยง</a>Enabled</h2>
<p>The <code>enabled_builder</code> closure is called on init to generate a boolean variable that defines
if the command handle is enabled. Command event handlers track both their existence and
the enabled flag, see <a href="../../zng_app/event/command/struct.Command.html#method.subscribe" title="method zng_app::event::command::Command::subscribe"><code>Command::subscribe</code></a> for details.</p>
<p>Note that the command handler can be enabled even when the widget is disabled, the widget
will receive the event while disabled in this case, you can use this to show feedback explaining
why the command cannot run.</p>
<h2 id="route"><a class="doc-anchor" href="#route">ยง</a>Route</h2>
<p>The event <code>handler</code> is called after the <a href="fn.on_pre_command.html" title="fn zng_wgt::node::on_pre_command"><code>on_pre_command</code></a> equivalent at the same context level. If the command
event targets more then one widget and one widget contains the other, the <code>handler</code> is called on the inner widget first.</p>
<h2 id="async"><a class="doc-anchor" href="#async">ยง</a>Async</h2>
<p>Async event handlers are called like normal, but code after the first <code>.await</code> only runs in subsequent updates. This means
that <a href="../../zng_app/event/args/trait.AnyEventArgs.html#tymethod.propagation" title="method zng_app::event::args::AnyEventArgs::propagation"><code>propagation</code></a> must be stopped before the first <code>.await</code>, otherwise you are only signaling
other async tasks handling the same event, if they are monitoring the propagation handle.</p>
</div></details></section></div></main></body></html>