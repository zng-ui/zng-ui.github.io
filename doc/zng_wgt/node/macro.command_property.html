<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content=" Declare one or more command event properties."><title>command_property in zng_wgt::node - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-84e720fa.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="zng_wgt" data-themes="" data-resource-suffix="" data-rustdoc-version="1.89.0 (29483883e 2025-08-04)" data-channel="1.89.0" data-search-js="search-92309212.js" data-settings-js="settings-5514c975.js" ><script src="../../static.files/storage-4e99c027.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-fd3af306.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-32bb7600.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo-icon.png"><script>
// Hides tagged `macro_rules!` macros from crate root.

document.addEventListener('DOMContentLoaded', function () {
    let is_front_pg = false;
    document.querySelectorAll('h1').forEach(function (h) {
        if (h.innerText.trimStart().startsWith("Crate ")) {
            is_front_pg = true;
        }
    });

    if (is_front_pg) {
        // remove tagged macros.
        let removes = document.querySelectorAll('span[data-del-macro-root]');
        for (let remove of removes) {
            let div = remove.parentElement.parentElement;
            if (div.previousElementSibling != null) {
                div.previousElementSibling.remove();
            }
            div.remove();
        }
    }

    // remove empty macros section.
    let title = document.getElementById('macros');
    if (title != null && title.nextElementSibling.querySelector('a') == null) {
        title.nextElementSibling.remove();
        title.remove();

        let side_anchor = document.querySelector('a[href="#macros"]');
        if (side_anchor != null) {
            side_anchor.parentElement.remove();
        }
    }
})
</script>
</head><body class="rustdoc macro"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../zng_wgt/index.html"><img src="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../zng_wgt/index.html"><img src="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo.png" alt="logo"></a><h2><a href="../../zng_wgt/index.html">zng_wgt</a><span class="version">0.9.3</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">command_<wbr>property</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#examples" title="Examples">Examples</a></li><li><a href="#command" title="Command">Command</a></li><li><a href="#enabled" title="Enabled">Enabled</a></li><li><a href="#implement-for" title="Implement For">Implement For</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In zng_<wbr>wgt::<wbr>node</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">zng_wgt</a>::<wbr><a href="index.html">node</a></div><h1>Macro <span class="macro">command_property</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/zng_wgt/node.rs.html#996-1015">Source</a> </span></div><pre class="rust item-decl"><code>macro_rules! command_property {
    ($(
        $(#[$on_cmd_attrs:meta])*
        $vis:vis fn $command:ident {
            cmd: $cmd_init:expr
            $(, enabled: $enabled_var:expr)?
            $(, widget_impl: $Wgt:ty)?
            $(,)?
        }
    )+) =&gt; { ... };
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p><span data-del-macro-root></span> Declare one or more command event properties.</p>
<p>Each declaration expands to two properties <code>on_$command</code> and <code>on_pre_$command</code>.
The preview properties call <a href="fn.on_pre_command.html" title="fn zng_wgt::node::on_pre_command"><code>on_pre_command</code></a>, the main event properties call <a href="fn.on_command.html" title="fn zng_wgt::node::on_command"><code>on_command</code></a>.</p>
<p>By default a <code>CAN_$COMMAND_VAR</code> and <code>can_$command</code> var and property are also generated.</p>
<h2 id="examples"><a class="doc-anchor" href="#examples">ยง</a>Examples</h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="macro">command_property!</span> {
    <span class="doccomment">/// Paste command property docs.
    </span><span class="kw">pub fn </span>paste {
        cmd: PASTE_CMD.scoped(WIDGET.id()),
    }
}</code></pre></div>
<p>The example above generates event properties <code>on_pre_paste</code> and <code>on_paste</code>, context property <code>can_paste</code> and
context var <code>CAN_PASTE_VAR</code>.</p>
<p>The event properties will hold a <a href="../../zng_app/event/command/struct.CommandHandle.html" title="struct zng_app::event::command::CommandHandle"><code>CommandHandle</code></a> when the widget is inited, the handle wil signal enabled based
on the contextual var value. The context property sets that var in a widget context.</p>
<h2 id="command"><a class="doc-anchor" href="#command">ยง</a>Command</h2>
<p>The <code>cmd:</code> expression evaluates on init to generate the command, this allows for the
creation of widget scoped commands. The new command property event handler will receive events
for the command and scope that target the widget where the property is set.</p>
<p>If the command is scoped on the root widget and the command property is set on the same root widget a second handle
is taken for the window scope too, so callers can target the <em>window</em> using the window ID or the root widget ID.</p>
<h2 id="enabled"><a class="doc-anchor" href="#enabled">ยง</a>Enabled</h2>
<p>The <code>enabled:</code> expression evaluates on init to generate a boolean variable that defines
if the command handle is enabled. Command event handlers track both their existence and
the enabled flag, see <a href="../../zng_app/event/command/struct.Command.html#method.subscribe" title="method zng_app::event::command::Command::subscribe"><code>Command::subscribe</code></a> for details.</p>
<p>If not provided a <code>CAN_$CMD_VAR</code> and <code>can_$cmd</code> contextual  var and property are generated.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="macro">command_property!</span> {
    <span class="doccomment">/// Paste command property docs.
    </span><span class="kw">pub fn </span>paste {
        cmd: PASTE_CMD.scoped(WIDGET.id()),
        enabled: const_var(<span class="bool-val">true</span>), <span class="comment">// command handle always enabled
    </span>}
}</code></pre></div>
<p>In the example above <code>enabled:</code> is set to a custom variable, so the associated
<code>CAN_PASTE_VAR</code> and <code>can_paste</code> will not be generated.</p>
<h2 id="implement-for"><a class="doc-anchor" href="#implement-for">ยง</a>Implement For</h2>
<p>You can implement the new properties for a widget or mix-in using the <code>widget_impl:</code> directive:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="doccomment">/// Clipboard handler.
</span><span class="attr">#[widget_mixin]
</span><span class="kw">pub struct </span>ClipboardMix&lt;P&gt;(P);

<span class="macro">command_property!</span> {
    <span class="doccomment">/// Paste command property docs.
    </span><span class="kw">pub fn </span>paste {
        cmd: PASTE_CMD.scoped(WIDGET.id()),
        widget_impl: ClipboardMix&lt;P&gt;,
    }
}</code></pre></div>
</div></details></section></div></main></body></html>