<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Helper for declaring widgets that are recontextualized to take in some of the context of an original parent."><title>with_context_blend in zng_wgt::node - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-1a91846b.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="zng_wgt" data-themes="" data-resource-suffix="" data-rustdoc-version="1.88.0 (6b00bc388 2025-06-23)" data-channel="1.88.0" data-search-js="search-f7877310.js" data-settings-js="settings-5514c975.js" ><script src="../../static.files/storage-4e99c027.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-7ef8a74a.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-893ab5e7.css"></noscript><link rel="icon" href="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo-icon.png"><script>
// Hides tagged `macro_rules!` macros from crate root.

document.addEventListener('DOMContentLoaded', function () {
    let is_front_pg = false;
    document.querySelectorAll('h1').forEach(function (h) {
        if (h.innerText.trimStart().startsWith("Crate ")) {
            is_front_pg = true;
        }
    });

    if (is_front_pg) {
        // remove tagged macros.
        let removes = document.querySelectorAll('span[data-del-macro-root]');
        for (let remove of removes) {
            let div = remove.parentElement.parentElement;
            if (div.previousElementSibling != null) {
                div.previousElementSibling.remove();
            }
            div.remove();
        }
    }

    // remove empty macros section.
    let title = document.getElementById('macros');
    if (title != null && title.nextElementSibling.querySelector('a') == null) {
        title.nextElementSibling.remove();
        title.remove();

        let side_anchor = document.querySelector('a[href="#macros"]');
        if (side_anchor != null) {
            side_anchor.parentElement.remove();
        }
    }
})
</script>
</head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../zng_wgt/index.html"><img src="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo.png" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../zng_wgt/index.html"><img src="https://raw.githubusercontent.com/zng-ui/zng/main/examples/image/res/zng-logo.png" alt="logo"></a><h2><a href="../../zng_wgt/index.html">zng_wgt</a><span class="version">0.8.6</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">with_<wbr>context_<wbr>blend</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#warning" title="Warning">Warning</a></li><li><a href="#panics" title="Panics">Panics</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="index.html">In zng_<wbr>wgt::<wbr>node</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">zng_wgt</a>::<wbr><a href="index.html">node</a></div><h1>Function <span class="fn">with_context_blend</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/zng_wgt/node.rs.html#1798-1811">Source</a> </span></div><pre class="rust item-decl"><code>pub fn with_context_blend(
    ctx: <a class="struct" href="../../zng_app_context/struct.LocalContext.html" title="struct zng_app_context::LocalContext">LocalContext</a>,
    over: <a class="primitive" href="https://doc.rust-lang.org/1.88.0/std/primitive.bool.html">bool</a>,
    child: impl <a class="trait" href="../../zng_app/widget/node/trait.UiNode.html" title="trait zng_app::widget::node::UiNode">UiNode</a>,
) -&gt; impl <a class="trait" href="../../zng_app/widget/node/trait.UiNode.html" title="trait zng_app::widget::node::UiNode">UiNode</a></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Helper for declaring widgets that are recontextualized to take in some of the context
of an <em>original</em> parent.</p>
<p>See <a href="../../zng_app_context/struct.LocalContext.html#method.with_context_blend" title="method zng_app_context::LocalContext::with_context_blend"><code>LocalContext::with_context_blend</code></a> for more details about <code>over</code>. The returned
node will delegate all node operations to inside the blend. The <a href="../../zng_app/widget/node/trait.UiNode.html#method.with_context" title="method zng_app::widget::node::UiNode::with_context"><code>UiNode::with_context</code></a>
will delegate to the <code>child</code> widget context, but the <code>ctx</code> is not blended for this method, only
for <a href="../../zng_app/widget/node/match_node/enum.UiNodeOp.html" title="enum zng_app::widget::node::match_node::UiNodeOp"><code>UiNodeOp</code></a> methods.</p>
<h2 id="warning"><a class="doc-anchor" href="#warning">§</a>Warning</h2>
<p>Properties, context vars and context locals are implemented with the assumption that all consumers have
released the context on return, that is even if the context was shared with worker threads all work was block-waited.
This node breaks this assumption, specially with <code>over: true</code> you may cause unexpected behavior if you don’t consider
carefully what context is being captured and what context is being replaced.</p>
<p>As a general rule, only capture during init or update in <a href="../../zng_app/widget/builder/struct.NestGroup.html#associatedconstant.CHILD" title="associated constant zng_app::widget::builder::NestGroup::CHILD"><code>NestGroup::CHILD</code></a>, only wrap full widgets and only place the wrapped
widget in a parent’s <a href="../../zng_app/widget/builder/struct.NestGroup.html#associatedconstant.CHILD" title="associated constant zng_app::widget::builder::NestGroup::CHILD"><code>NestGroup::CHILD</code></a> for a parent that has no special expectations about the child.</p>
<p>As an example of things that can go wrong, if you capture during layout, the <code>LAYOUT</code> context is captured
and replaces <code>over</code> the actual layout context during all subsequent layouts in the actual parent.</p>
<h2 id="panics"><a class="doc-anchor" href="#panics">§</a>Panics</h2>
<p>Panics during init if <code>ctx</code> is not from the same app as the init context.</p>
</div></details></section></div></main></body></html>